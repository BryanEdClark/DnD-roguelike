<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Play Tools</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="logo-header">
                <img src="trogdor.png" alt="Trogdor" class="trogdor-logo">
                <h1>D&D Play Tools</h1>
            </div>
            <p class="login-subtitle">Welcome adventurer!</p>

            <div class="login-buttons">
                <button class="login-btn" onclick="showLoginModal()">Login</button>
                <button class="login-btn signup-btn" onclick="showSignupModal()">Sign Up</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Login</h2>
                <button class="modal-close" onclick="closeLoginModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="loginAccountName">Account Name</label>
                    <input type="text" id="loginAccountName" placeholder="Enter account name" />
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password (if required)</label>
                    <input type="password" id="loginPassword" placeholder="Leave blank if no password" />
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeLoginModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="attemptLogin()">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Create Account</h2>
                <button class="modal-close" onclick="closeSignupModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="signupAccountName">Account Name</label>
                    <input type="text" id="signupAccountName" placeholder="Enter account name" />
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password (Optional)</label>
                    <input type="password" id="signupPassword" placeholder="Leave blank for no password" />
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeSignupModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="createAccount()">Create Account</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="adminPage" class="container" style="display: none;">
        <header>
            <div class="header-content">
                <div>
                    <h1>üîê Admin Panel</h1>
                    <p class="subtitle">Account Management</p>
                </div>
                <div class="user-info">
                    <span class="current-user">Admin</span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </div>
        </header>

        <div class="admin-container">
            <div class="admin-header">
                <h2>Manage Accounts</h2>
                <button class="admin-refresh-btn" onclick="renderAdminAccounts()">üîÑ Refresh</button>
            </div>

            <div class="admin-accounts-list" id="adminAccountsList">
                <p class="no-accounts">Loading accounts...</p>
            </div>
        </div>
    </div>

    <div class="container" id="mainApp" style="display: none;">
        <header>
            <div class="header-content">
                <div>
                    <div class="logo-header">
                        <img src="trogdor.png" alt="Trogdor" class="trogdor-logo">
                        <h1>D&D Play Tools</h1>
                    </div>
                    <p class="subtitle">Fine I'll make my own tools!</p>
                </div>
                <div class="user-info">
                    <span class="current-user" id="currentUser"></span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('dmtools')">DM Tools</button>
            <button class="tab-button" onclick="switchTab('playertools')">Player Tools</button>
            <button class="tab-button" onclick="switchTab('diceroller')">Dice Roller</button>
        </div>

        <!-- DM Tools Section -->
        <div id="dmtoolsTab" class="tab-content active">
            <div class="section-tabs">
                <button class="section-tab-button active" onclick="switchSection('encounter')">Encounter Generator</button>
                <button class="section-tab-button" onclick="switchSection('browser')">Monster Browser</button>
            </div>

        <!-- Encounter Generator Tab -->
        <div id="encounterTab" class="tab-content active">
            <div class="encounter-generator">
                <h2>‚öîÔ∏è Generate Encounter</h2>

                <!-- Saved Encounters Section -->
                <div class="saved-encounters-section">
                    <label>Saved Encounters</label>
                    <div class="saved-encounters-controls">
                        <select id="savedFolderSelect" onchange="loadSavedEncountersInFolder()">
                            <option value="">All Encounters</option>
                        </select>
                        <select id="savedEncounterSelect" onchange="loadSavedEncounter()">
                            <option value="">Select a saved encounter...</option>
                        </select>
                        <button class="delete-saved-btn" onclick="deleteSavedEncounter()">üóëÔ∏è Delete</button>
                    </div>
                </div>

                <div class="generator-controls">
                    <div class="input-group">
                        <label for="partyLevel">Party Level</label>
                        <input type="number" id="partyLevel" min="1" max="20" value="1" />
                    </div>

                    <div class="input-group">
                        <label for="partySize">Party Size</label>
                        <input type="number" id="partySize" min="1" max="8" value="4" />
                    </div>

                    <div class="input-group difficulty-group">
                        <label for="difficulty">Difficulty</label>
                        <div class="difficulty-slider-container">
                            <input type="range" id="difficulty" min="0" max="4" value="1" step="1" />
                            <div class="difficulty-labels">
                                <span>Easy</span>
                                <span>Medium</span>
                                <span>Hard</span>
                                <span>Very Hard</span>
                                <span>You Gonna Die</span>
                            </div>
                            <div class="difficulty-indicator" id="difficultyIndicator">Medium</div>
                        </div>
                    </div>

                    <div class="input-group difficulty-group">
                        <label for="monsterCount">Number of Monsters</label>
                        <div class="difficulty-slider-container">
                            <input type="range" id="monsterCount" min="0" max="5" value="0" step="1" />
                            <div class="difficulty-labels">
                                <span>Auto</span>
                                <span>1</span>
                                <span>2</span>
                                <span>3</span>
                                <span>4</span>
                                <span>5</span>
                            </div>
                            <div class="difficulty-indicator" id="monsterCountIndicator">Auto</div>
                        </div>
                    </div>

                    <button class="generate-btn" onclick="generateEncounter()">Generate Encounter</button>
                </div>

                <div id="encounterResult" class="encounter-result"></div>
            </div>
        </div>

        <!-- Monster Browser Tab -->
        <div id="browserTab" class="tab-content">
            <div class="controls">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search monsters..." />
                </div>
                <div class="filter-box">
                    <label for="crFilter">Filter by CR:</label>
                    <select id="crFilter">
                        <option value="">All CRs</option>
                    </select>
                </div>
                <button class="toggle-builder-btn" onclick="toggleEncounterBuilder()">
                    <span id="builderToggleIcon">‚ñ∂</span> Custom Encounter Builder
                </button>
            </div>

            <!-- Custom Encounter Builder Panel -->
            <div id="encounterBuilderPanel" class="encounter-builder-panel">
                <div class="builder-header">
                    <h3>üõ†Ô∏è Custom Encounter Builder</h3>
                    <button class="builder-close-btn" onclick="toggleEncounterBuilder()">√ó</button>
                </div>
                <div class="builder-content">
                    <div class="builder-info">
                        <div class="builder-stat">
                            <span class="builder-stat-label">Total Monsters:</span>
                            <span id="builderTotalMonsters" class="builder-stat-value">0</span>
                        </div>
                        <div class="builder-stat">
                            <span class="builder-stat-label">Total XP:</span>
                            <span id="builderTotalXP" class="builder-stat-value">0</span>
                        </div>
                    </div>
                    <div id="builderMonstersList" class="builder-monsters-list">
                        <p class="no-monsters-selected">No monsters selected. Click "Add to Encounter" on any monster.</p>
                    </div>
                    <div class="builder-actions">
                        <button class="builder-action-btn save-btn" onclick="saveCustomEncounter()">üíæ Save Encounter</button>
                        <button class="builder-action-btn view-btn" onclick="viewCustomEncounter()">üëÅÔ∏è View Encounter</button>
                        <button class="builder-action-btn clear-btn" onclick="clearCustomEncounter()">üóëÔ∏è Clear All</button>
                    </div>
                </div>
            </div>

            <div class="content">
                <aside class="monster-list">
                    <h2>Monsters</h2>
                    <div id="monsterListContainer"></div>
                </aside>

                <main class="monster-display">
                    <div id="monsterDetail" class="monster-detail-empty">
                        <p>Select a monster to view details</p>
                    </div>
                </main>
            </div>
        </div>
        </div>

        <!-- Player Tools Section -->
        <div id="playertoolsTab" class="tab-content">
            <div class="player-tools-header">
                <div class="character-selector">
                    <select id="characterSelect" onchange="switchCharacter()">
                        <option value="0">Character 1</option>
                    </select>
                    <button class="char-add-btn" onclick="addNewCharacter()">+ New Character</button>
                    <button class="char-delete-btn" onclick="deleteCharacter()">Delete</button>
                </div>
            </div>

            <div class="section-tabs">
                <button class="section-tab-button active" onclick="switchPlayerSection('character')">Character Sheet</button>
                <button class="section-tab-button" onclick="switchPlayerSection('equipment')">Equipment</button>
                <button class="section-tab-button" onclick="switchPlayerSection('inventory')">Inventory</button>
                <button class="section-tab-button" onclick="switchPlayerSection('spells')">Spells</button>
                <button class="section-tab-button" onclick="switchPlayerSection('feats')">Feats</button>
                <button class="section-tab-button" onclick="switchPlayerSection('counters')">Counters</button>
            </div>

            <div id="characterSection" class="player-section active">
            <div class="character-sheet">
                <div class="character-sheet-header">
                    <h2>üìú Character Sheet</h2>
                </div>

                <!-- Character Header -->
                <div class="char-header">
                    <div class="char-header-row">
                        <div class="input-group char-input-box">
                            <label>Character Name</label>
                            <input type="text" id="charName" placeholder="Enter name" />
                        </div>
                        <div class="input-group char-input-box">
                            <label>Class</label>
                            <select id="charClass" onchange="updateHitDie(); autoSelectSpellcastingAbility()">
                                <option value="">Select Class</option>
                                <option value="Barbarian">Barbarian</option>
                                <option value="Bard">Bard</option>
                                <option value="Cleric">Cleric</option>
                                <option value="Druid">Druid</option>
                                <option value="Fighter">Fighter</option>
                                <option value="Monk">Monk</option>
                                <option value="Paladin">Paladin</option>
                                <option value="Ranger">Ranger</option>
                                <option value="Rogue">Rogue</option>
                                <option value="Sorcerer">Sorcerer</option>
                                <option value="Warlock">Warlock</option>
                                <option value="Wizard">Wizard</option>
                            </select>
                        </div>
                        <div class="input-group char-input-box">
                            <label>Subclass</label>
                            <select id="charSubclass">
                                <option value="">Select subclass</option>
                            </select>
                        </div>
                        <div class="input-group char-input-box">
                            <label>Level</label>
                            <input type="number" id="charLevel" min="1" max="20" value="1" onchange="updateProficiencyBonus(); updateSpellSaveDC()" />
                        </div>
                        <div class="input-group char-input-box">
                            <label>Background</label>
                            <input type="text" id="charBackground" placeholder="Enter background" />
                        </div>
                        <div class="input-group char-input-box">
                            <label>Species</label>
                            <select id="charSpecies" onchange="updateSubspeciesOptions()">
                                <option value="">Select species</option>
                                <option value="Aasimar">Aasimar</option>
                                <option value="Dragonborn">Dragonborn</option>
                                <option value="Dwarf">Dwarf</option>
                                <option value="Elf">Elf</option>
                                <option value="Gnome">Gnome</option>
                                <option value="Goliath">Goliath</option>
                                <option value="Half-Elf">Half-Elf</option>
                                <option value="Halfling">Halfling</option>
                                <option value="Human">Human</option>
                                <option value="Orc">Orc</option>
                                <option value="Tiefling">Tiefling</option>
                            </select>
                        </div>
                        <div class="input-group char-input-box">
                            <label>Subspecies</label>
                            <select id="charSubspecies">
                                <option value="">Select subspecies</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Main Stats Section -->
                <div class="char-main">
                    <!-- Ability Scores -->
                    <div class="char-abilities">
                        <h3>Ability Scores</h3>
                        <div class="ability-grid">
                            <div class="ability-score">
                                <label>STR</label>
                                <input type="number" id="str" value="10" min="1" max="30" />
                                <div class="modifier" id="strMod">+0</div>
                            </div>
                            <div class="ability-score">
                                <label>DEX</label>
                                <input type="number" id="dex" value="10" min="1" max="30" />
                                <div class="modifier" id="dexMod">+0</div>
                            </div>
                            <div class="ability-score">
                                <label>CON</label>
                                <input type="number" id="con" value="10" min="1" max="30" onchange="updateConSaveBonus()" />
                                <div class="modifier" id="conMod">+0</div>
                            </div>
                            <div class="ability-score">
                                <label>INT</label>
                                <input type="number" id="int" value="10" min="1" max="30" onchange="updateSpellSaveDC()" />
                                <div class="modifier" id="intMod">+0</div>
                            </div>
                            <div class="ability-score">
                                <label>WIS</label>
                                <input type="number" id="wis" value="10" min="1" max="30" onchange="updateSpellSaveDC()" />
                                <div class="modifier" id="wisMod">+0</div>
                            </div>
                            <div class="ability-score">
                                <label>CHA</label>
                                <input type="number" id="cha" value="10" min="1" max="30" onchange="updateSpellSaveDC()" />
                                <div class="modifier" id="chaMod">+0</div>
                            </div>
                        </div>
                    </div>

                    <!-- Combat Stats -->
                    <div class="char-combat">
                        <div class="combat-stat">
                            <label>Armor Class</label>
                            <input type="number" id="ac" value="10" min="1" />
                        </div>
                        <div class="combat-stat">
                            <label>Initiative</label>
                            <input type="text" id="initiative" value="+0" readonly />
                        </div>
                        <div class="combat-stat">
                            <label>Speed</label>
                            <input type="number" id="speed" value="30" />
                        </div>
                        <div class="combat-stat">
                            <label>Hit Point Max</label>
                            <input type="number" id="hpMax" value="10" min="1" />
                            <button class="set-hp-btn" onclick="setHPFromClass()" title="Calculate HP based on class and level">Set HP</button>
                        </div>
                        <div class="combat-stat">
                            <label>Current HP</label>
                            <input type="number" id="hpCurrent" value="10" min="0" />
                        </div>
                        <div class="combat-stat">
                            <label>Temp HP</label>
                            <input type="number" id="hpTemp" value="0" min="0" />
                        </div>
                        <div class="combat-stat">
                            <label>Hit Dice</label>
                            <input type="text" id="hitDice" placeholder="e.g., 1d10" />
                        </div>
                        <div class="combat-stat">
                            <label>Proficiency Bonus</label>
                            <input type="number" id="profBonus" value="2" min="2" max="6" />
                        </div>
                    </div>
                </div>

                <!-- Saving Throws Section -->
                <div class="char-saves">
                    <h3>Saving Throws</h3>
                    <div class="saves-grid">
                        <div class="save-item">
                            <input type="checkbox" id="saveStr" />
                            <label for="saveStr">Strength</label>
                            <span class="save-bonus" id="bonusSaveStr">+0</span>
                        </div>
                        <div class="save-item">
                            <input type="checkbox" id="saveDex" />
                            <label for="saveDex">Dexterity</label>
                            <span class="save-bonus" id="bonusSaveDex">+0</span>
                        </div>
                        <div class="save-item">
                            <input type="checkbox" id="saveCon" />
                            <label for="saveCon">Constitution</label>
                            <span class="save-bonus" id="bonusSaveCon">+0</span>
                        </div>
                        <div class="save-item">
                            <input type="checkbox" id="saveInt" />
                            <label for="saveInt">Intelligence</label>
                            <span class="save-bonus" id="bonusSaveInt">+0</span>
                        </div>
                        <div class="save-item">
                            <input type="checkbox" id="saveWis" />
                            <label for="saveWis">Wisdom</label>
                            <span class="save-bonus" id="bonusSaveWis">+0</span>
                        </div>
                        <div class="save-item">
                            <input type="checkbox" id="saveCha" />
                            <label for="saveCha">Charisma</label>
                            <span class="save-bonus" id="bonusSaveCha">+0</span>
                        </div>
                    </div>
                </div>

                <!-- Skills Section -->
                <div class="char-skills">
                    <h3>Skills</h3>
                    <div class="skills-by-ability">
                        <div class="skill-group">
                            <h4>Strength</h4>
                            <div class="skill-item">
                                <input type="checkbox" id="skillAthletics" />
                                <label for="skillAthletics">Athletics</label>
                                <span class="skill-bonus" id="bonusAthletics">+0</span>
                            </div>
                        </div>

                        <div class="skill-group">
                            <h4>Dexterity</h4>
                            <div class="skill-item">
                                <input type="checkbox" id="skillAcrobatics" />
                                <label for="skillAcrobatics">Acrobatics</label>
                                <span class="skill-bonus" id="bonusAcrobatics">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillSleightOfHand" />
                                <label for="skillSleightOfHand">Sleight of Hand</label>
                                <span class="skill-bonus" id="bonusSleightOfHand">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillStealth" />
                                <label for="skillStealth">Stealth</label>
                                <span class="skill-bonus" id="bonusStealth">+0</span>
                            </div>
                        </div>

                        <div class="skill-group">
                            <h4>Intelligence</h4>
                            <div class="skill-item">
                                <input type="checkbox" id="skillArcana" />
                                <label for="skillArcana">Arcana</label>
                                <span class="skill-bonus" id="bonusArcana">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillHistory" />
                                <label for="skillHistory">History</label>
                                <span class="skill-bonus" id="bonusHistory">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillInvestigation" />
                                <label for="skillInvestigation">Investigation</label>
                                <span class="skill-bonus" id="bonusInvestigation">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillNature" />
                                <label for="skillNature">Nature</label>
                                <span class="skill-bonus" id="bonusNature">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillReligion" />
                                <label for="skillReligion">Religion</label>
                                <span class="skill-bonus" id="bonusReligion">+0</span>
                            </div>
                        </div>

                        <div class="skill-group">
                            <h4>Wisdom</h4>
                            <div class="skill-item">
                                <input type="checkbox" id="skillAnimalHandling" />
                                <label for="skillAnimalHandling">Animal Handling</label>
                                <span class="skill-bonus" id="bonusAnimalHandling">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillInsight" />
                                <label for="skillInsight">Insight</label>
                                <span class="skill-bonus" id="bonusInsight">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillMedicine" />
                                <label for="skillMedicine">Medicine</label>
                                <span class="skill-bonus" id="bonusMedicine">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillPerception" />
                                <label for="skillPerception">Perception</label>
                                <span class="skill-bonus" id="bonusPerception">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillSurvival" />
                                <label for="skillSurvival">Survival</label>
                                <span class="skill-bonus" id="bonusSurvival">+0</span>
                            </div>
                        </div>

                        <div class="skill-group">
                            <h4>Charisma</h4>
                            <div class="skill-item">
                                <input type="checkbox" id="skillDeception" />
                                <label for="skillDeception">Deception</label>
                                <span class="skill-bonus" id="bonusDeception">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillIntimidation" />
                                <label for="skillIntimidation">Intimidation</label>
                                <span class="skill-bonus" id="bonusIntimidation">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillPerformance" />
                                <label for="skillPerformance">Performance</label>
                                <span class="skill-bonus" id="bonusPerformance">+0</span>
                            </div>
                            <div class="skill-item">
                                <input type="checkbox" id="skillPersuasion" />
                                <label for="skillPersuasion">Persuasion</label>
                                <span class="skill-bonus" id="bonusPersuasion">+0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Features & Traits -->
                <div class="char-bottom">
                    <div class="char-notes">
                        <div class="section-header-with-toggle">
                            <h3>Features & Traits</h3>
                            <div class="auto-populate-buttons">
                                <button class="auto-populate-btn class-populate" onclick="autoPopulateClassTraits()">üé≠ Auto-Populate Class Traits</button>
                                <button class="auto-populate-btn species-populate" onclick="autoPopulateSpeciesTraits()">üß¨ Auto-Populate Species Traits</button>
                            </div>
                        </div>
                        <div id="traitsList" class="traits-list">
                            <p class="no-traits">No features or traits added. Use auto-populate buttons or add manually.</p>
                        </div>
                        <button class="trait-add-btn" onclick="addCustomTrait()">+ Add Custom Trait</button>
                    </div>
                </div>
            </div>
            </div>

            <div id="equipmentSection" class="player-section">
                <div class="equipment-container">
                    <h2>‚öîÔ∏è Equipment & Weapons</h2>

                    <!-- Attack Bonuses Display -->
                    <div class="attack-bonuses-container">
                        <div class="attack-bonus-box">
                            <div class="attack-bonus-label">Melee Attack Bonus</div>
                            <div class="attack-bonus-value" id="meleeAttackBonus">--</div>
                            <div class="attack-bonus-formula" id="meleeAttackFormula">Prof + STR</div>
                        </div>
                        <div class="attack-bonus-box">
                            <div class="attack-bonus-label">Ranged Attack Bonus</div>
                            <div class="attack-bonus-value" id="rangedAttackBonus">--</div>
                            <div class="attack-bonus-formula" id="rangedAttackFormula">Prof + DEX</div>
                        </div>
                        <div class="attack-bonus-box">
                            <div class="attack-bonus-label">Finesse Attack Bonus</div>
                            <div class="attack-bonus-value" id="finesseAttackBonus">--</div>
                            <div class="attack-bonus-formula" id="finesseAttackFormula">Prof + DEX or STR</div>
                        </div>
                    </div>

                    <!-- Armor Section -->
                    <div class="equipment-subsection">
                        <div class="section-header-with-toggle">
                            <h3>üõ°Ô∏è Armor</h3>
                            <button class="spell-add-btn" onclick="addArmorItem()">+ Add Armor</button>
                        </div>
                        <div id="armorList" class="equipment-list">
                            <p class="no-items">No armor items. Click "+ Add Armor" to add one.</p>
                        </div>
                    </div>

                    <!-- Weapons Section -->
                    <div class="equipment-subsection">
                        <div class="section-header-with-toggle">
                            <h3>‚öîÔ∏è Weapons</h3>
                            <button class="spell-add-btn" onclick="addWeaponItem()">+ Add Weapon</button>
                        </div>
                        <div id="weaponsList" class="equipment-list">
                            <p class="no-items">No weapons. Click "+ Add Weapon" to add one.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="inventorySection" class="player-section">
                <div class="equipment-container">
                    <h2>üéí Inventory</h2>

                    <!-- Currency Section -->
                    <div class="currency-section">
                        <h3>üí∞ Currency</h3>
                        <div class="currency-grid">
                            <div class="currency-item">
                                <label for="currencyCP">Copper (CP)</label>
                                <input type="number" id="currencyCP" min="0" value="0" onchange="saveCurrency()" />
                            </div>
                            <div class="currency-item">
                                <label for="currencySP">Silver (SP)</label>
                                <input type="number" id="currencySP" min="0" value="0" onchange="saveCurrency()" />
                            </div>
                            <div class="currency-item">
                                <label for="currencyEP">Electrum (EP)</label>
                                <input type="number" id="currencyEP" min="0" value="0" onchange="saveCurrency()" />
                            </div>
                            <div class="currency-item">
                                <label for="currencyGP">Gold (GP)</label>
                                <input type="number" id="currencyGP" min="0" value="0" onchange="saveCurrency()" />
                            </div>
                            <div class="currency-item">
                                <label for="currencyPP">Platinum (PP)</label>
                                <input type="number" id="currencyPP" min="0" value="0" onchange="saveCurrency()" />
                            </div>
                        </div>
                    </div>

                    <!-- Inventory Items Section -->
                    <div class="equipment-subsection">
                        <div class="section-header-with-toggle">
                            <h3>üì¶ Items</h3>
                            <button class="spell-add-btn" onclick="addInventoryItem()">+ Add Item</button>
                        </div>
                        <div id="inventoryList" class="equipment-list">
                            <p class="no-items">No items in inventory. Click "+ Add Item" to add one.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="spellsSection" class="player-section">
                <div class="spells-container">
                    <h2>‚ú® Spells</h2>

                    <!-- Spell Save DC Display -->
                    <div class="spell-save-dc-container">
                        <div class="spell-save-dc-box">
                            <div class="spell-save-dc-label">Spell Save DC</div>
                            <div class="spell-save-dc-value" id="spellSaveDC">--</div>
                        </div>
                        <div class="spell-save-dc-box">
                            <div class="spell-save-dc-label">Spell Attack Bonus</div>
                            <div class="spell-save-dc-value" id="spellAttackBonus">--</div>
                        </div>
                        <div class="spellcasting-ability-selector">
                            <label for="spellcastingAbility">Spellcasting Ability:</label>
                            <select id="spellcastingAbility" onchange="updateSpellSaveDC()">
                                <option value="">Select ability</option>
                                <option value="int">Intelligence</option>
                                <option value="wis">Wisdom</option>
                                <option value="cha">Charisma</option>
                            </select>
                        </div>
                    </div>

                    <!-- Concentration Checker -->
                    <div class="concentration-checker-container">
                        <div class="concentration-header">
                            <h3>‚ö° Concentration Check</h3>
                            <p class="concentration-subtitle">Check if you maintain concentration after taking damage</p>
                        </div>
                        <div class="concentration-inputs">
                            <div class="concentration-input-group">
                                <label for="damageTaken">Damage Taken:</label>
                                <input type="number" id="damageTaken" min="0" value="0" placeholder="Enter damage" onchange="checkConcentration()" />
                            </div>
                            <div class="concentration-input-group">
                                <label for="conSaveBonus">CON Save Bonus:</label>
                                <input type="number" id="conSaveBonus" value="0" placeholder="+0" readonly />
                            </div>
                        </div>
                        <div class="concentration-result">
                            <div class="concentration-dc-display">
                                <span class="concentration-dc-label">Required DC:</span>
                                <span class="concentration-dc-value" id="concentrationDC">10</span>
                            </div>
                            <div class="concentration-roll-section">
                                <div class="concentration-roll-options">
                                    <div class="advantage-disadvantage-checkboxes">
                                        <label class="adv-dis-checkbox">
                                            <input type="checkbox" id="concentrationAdvantage" onchange="toggleConcentrationAdvantage('advantage')">
                                            <span>Advantage</span>
                                        </label>
                                        <label class="adv-dis-checkbox">
                                            <input type="checkbox" id="concentrationDisadvantage" onchange="toggleConcentrationAdvantage('disadvantage')">
                                            <span>Disadvantage</span>
                                        </label>
                                    </div>
                                    <button class="concentration-roll-btn" onclick="rollConcentrationSave()">üé≤ Roll CON Save</button>
                                </div>
                                <div class="concentration-roll-result" id="concentrationRollResult"></div>
                            </div>
                        </div>
                    </div>

                    <div class="char-spells">
                        <div class="spells-controls">
                            <button class="spell-add-btn" onclick="openSpellSelector()">+ Add Spell</button>
                        </div>
                        <div id="selectedSpells" class="selected-spells">
                            <p class="no-spells">No spells selected. Click "Add Spell" to browse available spells.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="featsSection" class="player-section">
                <div class="feats-container">
                    <h2>üéØ Feats</h2>
                    <div class="char-feats">
                        <div class="feats-controls">
                            <button class="feat-add-btn" onclick="openFeatSelector()">+ Add Feat</button>
                        </div>
                        <div id="selectedFeats" class="selected-feats">
                            <p class="no-feats">No feats selected. Click "Add Feat" to browse available feats.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="countersSection" class="player-section">
                <div class="counters-container">
                    <h2>üé≤ Counters</h2>
                    <p class="counters-subtitle">Track spell slots, class resources, and other limited-use abilities</p>

                    <div class="counter-character-selector">
                        <label>Character:</label>
                        <select id="counterCharacterSelect" onchange="switchCounterCharacter()">
                            <option value="0">Character 1</option>
                        </select>
                    </div>

                    <div class="counter-add-controls">
                        <button class="counter-add-btn" onclick="addCounter()">+ Add Counter</button>
                        <button class="counter-add-btn" onclick="autoPopulateCounters()">Auto-populate Counters</button>
                        <button class="counter-reset-all-btn" onclick="resetAllCounters()" id="resetAllBtn" style="display: none;">Reset All to Max</button>
                    </div>

                    <div id="countersList" class="counters-list">
                        <p class="no-counters">No counters yet. Click "Add Counter" to create one.</p>
                    </div>
                </div>
            </div>

            <!-- Add Counter Modal -->
            <div id="addCounterModal" class="modal">
                <div class="modal-content small-modal">
                    <div class="modal-header">
                        <h2>Add Counter</h2>
                        <button class="modal-close" onclick="closeAddCounterModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="counterName">Counter Name</label>
                            <input type="text" id="counterName" placeholder="e.g., Spell Slots - Level 1, Rage Uses" />
                        </div>
                        <div class="form-group">
                            <label for="counterMax">Maximum Value</label>
                            <input type="number" id="counterMax" min="1" value="3" />
                        </div>
                        <div class="modal-actions">
                            <button class="modal-btn cancel-btn" onclick="closeAddCounterModal()">Cancel</button>
                            <button class="modal-btn confirm-btn" onclick="confirmAddCounter()">Add Counter</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Edit Counter Modal -->
            <div id="editCounterModal" class="modal">
                <div class="modal-content small-modal">
                    <div class="modal-header">
                        <h2>Edit Counter</h2>
                        <button class="modal-close" onclick="closeEditCounterModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="editCounterName">Counter Name</label>
                            <input type="text" id="editCounterName" placeholder="e.g., Spell Slots - Level 1, Rage Uses" />
                        </div>
                        <div class="form-group">
                            <label for="editCounterMax">Maximum Value</label>
                            <input type="number" id="editCounterMax" min="1" value="3" />
                        </div>
                        <div class="modal-actions">
                            <button class="modal-btn cancel-btn" onclick="closeEditCounterModal()">Cancel</button>
                            <button class="modal-btn confirm-btn" onclick="confirmEditCounter()">Save Changes</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Delete Counter Confirmation Modal -->
            <div id="deleteCounterModal" class="modal">
                <div class="modal-content small-modal">
                    <div class="modal-header">
                        <h2>Delete Counter</h2>
                        <button class="modal-close" onclick="closeDeleteCounterModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p style="color: var(--text); margin-bottom: 20px;">Are you sure you want to delete this counter?</p>
                        <div class="modal-actions">
                            <button class="modal-btn cancel-btn" onclick="closeDeleteCounterModal()">Cancel</button>
                            <button class="modal-btn confirm-btn delete-confirm-btn" onclick="confirmDeleteCounter()">Delete</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Spell Selector Modal -->
            <div id="spellModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Select Spell</h2>
                        <button class="modal-close" onclick="closeSpellSelector()">&times;</button>
                    </div>
                    <div class="spell-filters">
                        <div class="spell-search">
                            <input type="text" id="spellSearch" placeholder="Search spells..." oninput="filterSpells()" />
                        </div>
                        <div class="spell-class-filter">
                            <label>
                                <input type="checkbox" id="showAllClassSpells" onchange="filterSpells()" />
                                Show all class spells
                            </label>
                            <span id="currentClassFilter"></span>
                        </div>
                    </div>
                    <div class="modal-tabs">
                        <button class="modal-tab-btn active" onclick="switchSpellTab('cantrip')">Cantrips</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level1')">1</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level2')">2</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level3')">3</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level4')">4</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level5')">5</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level6')">6</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level7')">7</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level8')">8</button>
                        <button class="modal-tab-btn" onclick="switchSpellTab('level9')">9</button>
                    </div>
                    <div class="modal-body">
                        <div id="cantripSpellsTab" class="spell-tab-content active">
                            <div id="cantripSpellsList" class="spells-list"></div>
                        </div>
                        <div id="level1SpellsTab" class="spell-tab-content">
                            <div id="level1SpellsList" class="spells-list"></div>
                        </div>
                        <div id="level2SpellsTab" class="spell-tab-content">
                            <div id="level2SpellsList" class="spells-list"></div>
                        </div>
                        <div id="level3SpellsTab" class="spell-tab-content">
                            <div id="level3SpellsList" class="spells-list"></div>
                        </div>
                        <div id="level4SpellsTab" class="spell-tab-content">
                            <div id="level4SpellsList" class="spells-list"></div>
                        </div>
                        <div id="level5SpellsTab" class="spell-tab-content">
                            <div id="level5SpellsList" class="spells-list"></div>
                        </div>
                        <div id="level6SpellsTab" class="spell-tab-content">
                            <div id="level6SpellsList" class="spells-list"></div>
                        </div>
                        <div id="level7SpellsTab" class="spell-tab-content">
                            <div id="level7SpellsList" class="spells-list"></div>
                        </div>
                        <div id="level8SpellsTab" class="spell-tab-content">
                            <div id="level8SpellsList" class="spells-list"></div>
                        </div>
                        <div id="level9SpellsTab" class="spell-tab-content">
                            <div id="level9SpellsList" class="spells-list"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Feat Selector Modal -->
            <div id="featModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Select Feat</h2>
                        <button class="modal-close" onclick="closeFeatSelector()">&times;</button>
                    </div>
                    <div class="modal-tabs">
                        <button class="modal-tab-btn" onclick="switchFeatTab('origin')">Origin Feats</button>
                        <button class="modal-tab-btn active" onclick="switchFeatTab('general')">General Feats</button>
                    </div>
                    <div class="modal-body">
                        <div id="originFeatsTab" class="feat-tab-content">
                            <div id="originFeatsList" class="feats-list"></div>
                        </div>
                        <div id="generalFeatsTab" class="feat-tab-content active">
                            <div id="generalFeatsList" class="feats-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dice Roller Section -->
        <div id="dicerollerTab" class="tab-content">
            <div class="dice-roller-container">
                <h2>üé≤ Dice Roller</h2>

                <div class="saved-dice-section">
                    <label for="savedDiceSelect">Saved Dice Configurations</label>
                    <div class="saved-dice-controls">
                        <select id="savedDiceSelect" onchange="loadSavedDice()">
                            <option value="">Select a saved configuration...</option>
                        </select>
                        <button class="delete-saved-btn" onclick="deleteSavedDice()">üóëÔ∏è Delete</button>
                    </div>
                </div>

                <div class="dice-controls">
                    <div class="dice-input-group">
                        <label for="d4Count">d4</label>
                        <input type="number" id="d4Count" min="0" value="0" />
                    </div>
                    <div class="dice-input-group">
                        <label for="d6Count">d6</label>
                        <input type="number" id="d6Count" min="0" value="0" />
                    </div>
                    <div class="dice-input-group">
                        <label for="d8Count">d8</label>
                        <input type="number" id="d8Count" min="0" value="0" />
                    </div>
                    <div class="dice-input-group">
                        <label for="d10Count">d10</label>
                        <input type="number" id="d10Count" min="0" value="0" />
                    </div>
                    <div class="dice-input-group">
                        <label for="d12Count">d12</label>
                        <input type="number" id="d12Count" min="0" value="0" />
                    </div>
                    <div class="dice-input-group">
                        <label for="d20Count">d20</label>
                        <input type="number" id="d20Count" min="0" value="0" />
                    </div>
                    <div class="dice-input-group">
                        <label for="d100Count">d%</label>
                        <input type="number" id="d100Count" min="0" value="0" />
                    </div>
                </div>

                <div class="dice-actions">
                    <button class="roll-btn" onclick="rollDice()">üé≤ Roll Dice</button>
                    <button class="save-dice-btn" onclick="saveDiceConfiguration()">üíæ Save Configuration</button>
                    <button class="clear-btn" onclick="clearDice()">Clear</button>
                </div>

                <div id="diceResults" class="dice-results">
                    <p class="no-results">Set dice counts above and click "Roll Dice" to see results</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Delete Account Confirmation Modal -->
    <div id="adminDeleteModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Delete Account</h2>
                <button class="modal-close" onclick="closeAdminDeleteModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text); margin-bottom: 20px;">Are you sure you want to delete this account? This action cannot be undone.</p>
                <p id="adminDeleteAccountName" style="color: var(--secondary); font-weight: 600; margin-bottom: 20px;"></p>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeAdminDeleteModal()">Cancel</button>
                    <button class="modal-btn confirm-btn delete-confirm-btn" onclick="confirmAdminDelete()">Delete Account</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Not Found Modal -->
    <div id="accountNotFoundModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Account Not Found</h2>
                <button class="modal-close" onclick="closeAccountNotFoundModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text); margin-bottom: 20px; text-align: center;">The account "<span id="accountNotFoundName" style="color: var(--secondary); font-weight: 600;"></span>" doesn't exist.</p>
                <p style="color: var(--text-dim); margin-bottom: 20px; text-align: center;">Would you like to create a new account?</p>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeAccountNotFoundModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="goToSignup()">Create Account</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Incorrect Password Modal -->
    <div id="incorrectPasswordModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Incorrect Password</h2>
                <button class="modal-close" onclick="closeIncorrectPasswordModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text); margin-bottom: 20px; text-align: center;">The password you entered is incorrect.</p>
                <p style="color: var(--text-dim); margin-bottom: 20px; text-align: center;">Please try again.</p>
                <div class="modal-actions">
                    <button class="modal-btn confirm-btn" onclick="closeIncorrectPasswordModal()">Try Again</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Character Confirmation Modal -->
    <div id="deleteCharacterModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Delete Character</h2>
                <button class="modal-close" onclick="closeDeleteCharacterModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text); margin-bottom: 20px; text-align: center;">Are you sure you want to delete this character?</p>
                <p id="deleteCharacterName" style="color: var(--secondary); font-weight: 600; margin-bottom: 20px; text-align: center;"></p>
                <p style="color: var(--text-dim); margin-bottom: 20px; text-align: center; font-size: 0.9rem;">This action cannot be undone.</p>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeDeleteCharacterModal()">Cancel</button>
                    <button class="modal-btn confirm-btn delete-confirm-btn" onclick="confirmDeleteCharacter()">Delete Character</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bender-footer">
        <p class="bender-text" onclick="showBender()">The Blackjack and Hookers</p>
    </footer>

    <!-- Bender Overlay -->
    <div id="benderOverlay" class="bender-overlay" onclick="hideBender()">
        <img src="bender.png" alt="Bender" class="bender-full-image">
    </div>

    <!-- Add Armor Modal -->
    <div id="addArmorModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Add Armor</h2>
                <button class="modal-close" onclick="closeAddArmorModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="armorName">Armor Name</label>
                    <input type="text" id="armorName" placeholder="e.g., Chain Mail, Leather Armor" />
                </div>
                <div class="form-group">
                    <label for="armorAC">Armor Class (AC)</label>
                    <input type="number" id="armorAC" min="1" max="30" value="10" />
                </div>
                <div class="form-group">
                    <label for="armorBonus">Bonus</label>
                    <input type="text" id="armorBonus" placeholder="e.g., +2, +1 Dex (max 2)" />
                </div>
                <div class="form-group">
                    <label for="armorNotes">Notes (Optional)</label>
                    <textarea id="armorNotes" class="equipment-notes-input" rows="3" placeholder="Additional notes about this armor..."></textarea>
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeAddArmorModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="confirmAddArmor()">Add Armor</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Weapon Modal -->
    <div id="addWeaponModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Add Weapon</h2>
                <button class="modal-close" onclick="closeAddWeaponModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="weaponName">Weapon Name</label>
                    <input type="text" id="weaponName" placeholder="e.g., Longsword, Shortbow" />
                </div>
                <div class="form-group">
                    <label for="weaponDie">Hit Die</label>
                    <select id="weaponDie" class="hit-die-select">
                        <option value="d4">d4</option>
                        <option value="d6">d6</option>
                        <option value="d8" selected>d8</option>
                        <option value="d10">d10</option>
                        <option value="d12">d12</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="weaponBonus">Bonus</label>
                    <input type="text" id="weaponBonus" placeholder="e.g., +2, +1d6 fire" />
                </div>
                <div class="form-group">
                    <label for="weaponNotes">Notes (Optional)</label>
                    <textarea id="weaponNotes" class="equipment-notes-input" rows="3" placeholder="Additional notes about this weapon..."></textarea>
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeAddWeaponModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="confirmAddWeapon()">Add Weapon</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Inventory Item Modal -->
    <div id="addInventoryModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Add Inventory Item</h2>
                <button class="modal-close" onclick="closeAddInventoryModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="inventoryName">Item Name</label>
                    <input type="text" id="inventoryName" placeholder="e.g., Rope, Torch, Potion of Healing" />
                </div>
                <div class="form-group">
                    <label for="inventoryQuantity">Quantity</label>
                    <input type="number" id="inventoryQuantity" min="1" value="1" />
                </div>
                <div class="form-group">
                    <label for="inventoryValue">Value (Optional)</label>
                    <div class="value-input-group">
                        <input type="number" id="inventoryValue" placeholder="0" min="0" />
                        <select id="inventoryCurrency">
                            <option value="cp">CP</option>
                            <option value="sp">SP</option>
                            <option value="ep">EP</option>
                            <option value="gp" selected>GP</option>
                            <option value="pp">PP</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inventoryNotes">Notes (Optional)</label>
                    <textarea id="inventoryNotes" class="equipment-notes-input" rows="3" placeholder="Additional notes about this item..."></textarea>
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeAddInventoryModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="confirmAddInventory()">Add Item</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Save Dice Configuration Modal -->
    <div id="saveDiceConfigModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Save Dice Configuration</h2>
                <button class="modal-close" onclick="closeSaveDiceConfigModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="diceConfigName">Configuration Name</label>
                    <input type="text" id="diceConfigName" placeholder="e.g., 2d6 + 1d20" />
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeSaveDiceConfigModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="confirmSaveDiceConfig()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Dice Configuration Modal -->
    <div id="deleteDiceConfigModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Delete Configuration</h2>
                <button class="modal-close" onclick="closeDeleteDiceConfigModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text); margin-bottom: 20px; text-align: center;">Are you sure you want to delete this dice configuration?</p>
                <p id="deleteDiceConfigName" style="color: var(--secondary); font-weight: 600; margin-bottom: 20px; text-align: center;"></p>
                <p style="color: var(--text-dim); margin-bottom: 20px; text-align: center; font-size: 0.9rem;">This action cannot be undone.</p>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeDeleteDiceConfigModal()">Cancel</button>
                    <button class="modal-btn confirm-btn delete-confirm-btn" onclick="confirmDeleteDiceConfig()">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Save Encounter Modal -->
    <div id="saveEncounterModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Save Encounter</h2>
                <button class="modal-close" onclick="closeSaveEncounterModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="encounterName">Encounter Name</label>
                    <input type="text" id="encounterName" placeholder="e.g., Goblin Ambush" />
                </div>
                <div class="form-group">
                    <label for="encounterFolder">Folder</label>
                    <select id="encounterFolder">
                        <option value="">No Folder</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="newFolderName">Or Create New Folder</label>
                    <input type="text" id="newFolderName" placeholder="Enter new folder name..." />
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeSaveEncounterModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="confirmSaveEncounter()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Encounter Confirmation Modal -->
    <div id="deleteEncounterModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Delete Encounter</h2>
                <button class="modal-close" onclick="closeDeleteEncounterModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text); margin-bottom: 20px; text-align: center;">Are you sure you want to delete this encounter?</p>
                <p id="deleteEncounterName" style="color: var(--secondary); font-weight: 600; margin-bottom: 20px; text-align: center;"></p>
                <p style="color: var(--text-dim); margin-bottom: 20px; text-align: center; font-size: 0.9rem;">This action cannot be undone.</p>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeDeleteEncounterModal()">Cancel</button>
                    <button class="modal-btn confirm-btn delete-confirm-btn" onclick="confirmDeleteEncounter()">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Custom Trait Modal -->
    <div id="addTraitModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Add Custom Trait</h2>
                <button class="modal-close" onclick="closeAddTraitModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="traitName">Trait Name</label>
                    <input type="text" id="traitName" placeholder="e.g., Darkvision" />
                </div>
                <div class="form-group">
                    <label for="traitNotes">Description/Notes</label>
                    <textarea id="traitNotes" rows="4" placeholder="Enter trait description..."></textarea>
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" onclick="closeAddTraitModal()">Cancel</button>
                    <button class="modal-btn confirm-btn" onclick="confirmAddTrait()">Add Trait</button>
                </div>
            </div>
        </div>
    </div>

    <script src="spells-complete.js"></script>
    <script src="app.js"></script>
</body>
</html>
